<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Read Fluid</title>
  <link rel="icon" href="https://raw.githubusercontent.com/AkulK1/TextReadability/master/RequestExtension/favicon-16x16.png">
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
  	<style>
		/* https://www.bestcssbuttongenerator.com/#/9 */
		.myButton {
			box-shadow:inset 0px 1px 0px 0px #cf866c;
			background:linear-gradient(to bottom, #d0451b 5%, #bc3315 100%);
			background-color:#d0451b;
			border-radius:3px;
			border:1px solid #942911;
			display:inline-block;
			cursor:pointer;
			color:#ffffff;
			font-family:Arial;
			font-size:13px;
			padding:6px 24px;
			text-decoration:none;
			text-shadow:0px 1px 0px #854629;
		}
		.myButton:hover {
			background:linear-gradient(to bottom, #bc3315 5%, #d0451b 100%);
			background-color:#bc3315;
		}
		.myButton:active {
			position:relative;
			top:1px;
		}
		/*https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_loader*/
		.loader {
		  border: 6px solid #f3f3f3;
		  border-radius: 50%;
		  border-top: 6px solid #3498db;
		  width: 25px;
		  height: 25px;
		  -webkit-animation: spin 2s linear infinite; /* Safari */
		  animation: spin 2s linear infinite;
		  margin: 0 auto;
		}
		/* Safari */
		@-webkit-keyframes spin {
		  0% { -webkit-transform: rotate(0deg); }
		  100% { -webkit-transform: rotate(360deg); }
		}
		@keyframes spin {
		  0% { transform: rotate(0deg); }
		  100% { transform: rotate(360deg); }
		}
		.active {
		  background-color: #ec4c4c;
		}
		li a:hover:not(.active) {
		  background-color: #111;
		}
		.headerbar {
		  list-style-type: none;
		  margin: 0;
		  padding: 0;
		  overflow: hidden;
		  background-color: #333;
		}

		.hElement {
		  float: left;
		  border-right:1px solid #bbb;
		}

		li a {
		  display: block;
		  color: white;
		  text-align: center;
		  padding: 14px 16px;
		  text-decoration: none;
		}
	</style>
</head>

<body class="stackedit">
	<ul class = "headerbar">
	  <li class = " active hElement"><a href="#home">Home</a></li>
	  <li class = "hElement"><a href="#news"> Model </a></li>
	  <li class = "hElement"><a href="#contact">Extension</a></li>
	  <li class = "hElement"><a href="#contact">Contact</a></li>
	  <li style="float:right;">
		<img src="https://raw.githubusercontent.com/AkulK1/TextReadability/master/RequestExtension/ReadFluidText.png" alt="scale" style="width:91%;height:91%;">
	  </li>
	</ul>
	
	
  <div class="stackedit__html"><h1 id="text-readability">Read Fluid</h1>
<p>Overview: <strong>A model to assess readability, trained on data from Common Core.</strong> The project also creates a glossary, whereby a list of 10 hardest words will be picked out and printed alongside their dictionary definitions.</p>
<ul>
<li>Text data and reading level classification taken from Common Core English Language Arts, Appendix B</li>
<li>Cleaned and processed texts for key features</li>
<li>Fitted using an ordinal regression model (mord.LogisticAT: <a href="https://pythonhosted.org/mord/reference.html#mord.LogisticAT">https://pythonhosted.org/mord/reference.html#mord.LogisticAT</a>)</li>
<li>Sorts words by difficulty (calculated using combined z-scores based on word frequency, length, and syllables per word)</li>
<li>Prints the definitions of the ten most difficult words</li>
<li>Pickled and fully productionized, now exists as a web application: <a href="http://www.lexlearntogether.com">www.lexlearntogether.com</a></li>
</ul>
<p><strong>By Akul Kesarwani and Anchi (Bryant) Xia, 2020</strong></p>
<h1 id="readibility-analysis">Readability Analysis</h1>
	<img class="marginauto" src="https://raw.githubusercontent.com/AkulK1/TextReadability/master/images/scale.png" alt="scale" style="middle"/>
	<br>
	<p><strong> Paste in your text below to generate a glossary and evaluate for readability </strong></p>
	<textarea placeholder="Enter your text here..." style="resize: none; overflow: hidden; height: 278px; min-height: 250px; width:700px; font-family: Arial; overflow-wrap: break-word; overflow:scroll;" rows="12" id="tx1"></textarea>
	<br>
	<br>
	<p><strong>Which of the following best describes your text input? Select to receive your analysis.</strong></p> 
	<button class="myButton" id="infoButton" onclick="printText(1)"> Info Text </button>
	<button class="myButton" id="fictionButton" onclick="printText(0)"> Fiction Text </button>
	<p id = "ALERT"> </p>
	<iframe id="loading" frameBorder="0" allowFullScreen></iframe>
	<p id = "textdifficulty"> </p>
	<ul id = "worddefs">  </ul>
	<p><strong> Paste in the url of a webpage you'd like to analyze </strong></p>
	<input id="urlpred" type="text" id="lname" name="lname" placeholder="Paste in your URL here..."><br><br>
	<button class="myButton" id="infoButtonURL" onclick="urlPred(1)"> Info Text </button>
	<button class="myButton" id="fictionButtonURL" onclick="urlPred(0)"> Fiction Text </button><br><br>
	<p id = "ALERTURL"> </p>
	<iframe id="loadingURL" frameBorder="0" allowFullScreen></iframe>
	<p id = "textdifficultyURL"> </p>
	<ul id = "worddefsURL">  </ul>
	<button class="myButton" onClick="window.location.reload();" text-align: center>Clear Everything</button>
    <script type ="text/javascript">
		function urlPred (tp){
			console.log ('working...');
			if(document.getElementById("urlpred").value == '')
			{
				document.getElementById ('loadingURL').src='';
				document.getElementById ('loadingURL').width=0;
				document.getElementById ('loadingURL').height=0;
				document.getElementById( "ALERTURL" ).innerHTML = "Please enter something first :-) ";
			}
			else{
				document.getElementById( "ALERTURL" ).innerHTML = "";
				document.getElementById ('loadingURL').src='https://giphy.com/embed/l3nWhI38IWDofyDrW';
				document.getElementById ('loadingURL').width=300;
				document.getElementById ('loadingURL').height=300;
				var x=document.getElementById('urlpred').value
				var xhr = new XMLHttpRequest();
				xhr.open( "POST", "https://ds-text-readability-20.herokuapp.com/urlpred" );
				xhr.setRequestHeader('Content-Type', 'application/json');
				xhr.send( JSON.stringify({
					article_url: String (x),
					info: tp
				}));
				xhr.onreadystatechange = function(){
					if (this.readyState == 4 && this.status == 200){
						document.getElementById ('loadingURL').src='';
						document.getElementById ('loadingURL').width=0;
						document.getElementById ('loadingURL').height=0;
						console.log (xhr.responseText);
						var responseJSON = JSON.parse(xhr.responseText);
						var tdiff = responseJSON.response;
						document.getElementById( "textdifficultyURL" ).innerHTML = "Difficulty: "+tdiff;
						document.getElementById( "worddefsURL" ).innerHTML = "";
						htmlList = document.getElementById( "worddefsURL" );
						for( var propt in responseJSON.diff_words ){
							var cur_li = document.createElement( "li" );
							var temp_str =  propt.bold()  + ": " + responseJSON.diff_words[propt];
							cur_li.innerHTML =  temp_str ;
							htmlList.appendChild( cur_li );
						}
					}
				}
			}
		}
	</script>
	<script type ="text/javascript">
		function printText (tp){
			if(document.getElementById("tx1").value == '')
			{
				document.getElementById ('loading').src='';
				document.getElementById ('loading').width=0;
				document.getElementById ('loading').height=0;
				document.getElementById( "ALERT" ).innerHTML = "Please enter something first :-) ";
			}
			else{
				document.getElementById( "ALERT" ).innerHTML = "";
				document.getElementById ('loading').src='https://giphy.com/embed/l3nWhI38IWDofyDrW';
				document.getElementById ('loading').width=300;
				document.getElementById ('loading').height=300;
				var x=document.getElementById('tx1').value
				var xhr = new XMLHttpRequest();
				xhr.open( "POST", "https://ds-text-readability-20.herokuapp.com/textpred" );
				xhr.setRequestHeader('Content-Type', 'application/json');
				xhr.send( JSON.stringify({
					input: String (x),
					info: tp
				}));
				xhr.onreadystatechange = function(){
					if (this.readyState == 4 && this.status == 200){
						document.getElementById ('loading').src='';
						document.getElementById ('loading').width=0;
						document.getElementById ('loading').height=0;
						console.log (xhr.responseText);
						var responseJSON = JSON.parse(xhr.responseText);
						var tdiff = responseJSON.response;
						document.getElementById( "textdifficulty" ).innerHTML = "Difficulty: "+tdiff;
						document.getElementById( "worddefs" ).innerHTML = "";
						htmlList = document.getElementById( "worddefs" );
						for( var propt in responseJSON.diff_words ){
							var cur_li = document.createElement( "li" );
							var temp_str =  propt.bold()  + ": " + responseJSON.diff_words[propt];
							cur_li.innerHTML =  temp_str ;
							htmlList.appendChild( cur_li );
						}
					}
				}
			}
		}
	</script>

<h1 id="purpose">Purpose</h1>
<p><strong>Our intention with the app is to make for a smoother reading experience by helping users understand how complex their text is and provide them with a glossary of some of the most difficult words, printed alongside of their dictionary definitions. </strong></p>
<p>There is a considerable number of English Language Learners in our school district (Lexington Public Schools). For english language learners and young readers, building up their reading ability entails engaging with texts of increasing difficulty. Using various linguistic attributes from the text, from syllables per word to the average length of verbs, we can fit these calculated features into a ordinal regression based model that would return a readability level prediction. This will be informative to users who are interested in knowing how challenging the text is before reading.<p>
<p> By having a glossary, we wish to help users improve their vocabulary without needing to constantly interrupt their reading experience to look up new words. And having familiarized themselves with some of the most difficult words in the text, seeing them again in context could potentially strengthen both the users’ understanding of new vocab and their overall compression of the text. 
</p>

<h1 id="data-used">Data Used</h1>
<p>Texts we used to train the model are from Common Core’s English Language Arts Appendix B. Since text difficulty is our response variable, we wanted to make sure that it cannot simply be calculated from the predictor variables themselves. This meant we could not use, say, the Lexile score as a measurement of readability. <p>
<p> To address the issue, we turned to Common Core’s Appendix B. Included in the appendix are sample texts sorted by grade level. Though educators who performed the sorting did refer to quantitative data like Lexile scores, their insights and experience undoubtedly played a significant role as well. By training our model with their text classifications, we look to capture patterns underlying their understanding instead of relying on quantitative attributes alone. </p>

<h1 id="exploratory-data-analysis-and-model-fitting">Exploratory Data Analysis and Model Fitting</h1>
<p><img src="https://raw.githubusercontent.com/AkulK1/TextReadability/master/images/corr.PNG" alt="Correlation"></p>
<br>
<p>We performed some exploratory data analysis after calculating text attributes. The heat map above shows how predictors correlate with assigned text difficulty as well as with each other. The following list is what went into generating the predictions you get:
<ul>
	<li><strong> Syllables per word </strong></li>
	<li><strong>Words per sentence</strong></li>
	<li><strong>Percentage of monosyllabic words</strong></li>
	<li><strong>Flesch-Kincaid readability score</strong></li>
	<li><strong>Ari readability score</strong></li>
	<li><strong>Dale readability score</strong></li>
	<li><strong>Gunning-Fog readability score</strong></li>
	<li><strong>CLI readability score</strong></li>
	<li><strong>Linsear Write readability score</strong></li>
	<li><strong># of determiners / sentence</strong></li>
	<li><strong># Subordinating conjunctions / sentence</strong></li>
	<li><strong>Average verb length</strong></li>

</ul> 
</p>
<p> We tried a number of models, from a simple decision tree regressor to random forest, before settling on an implementation of the <strong> ordinal logistic regression model by Mord </strong>. Since our response variable, text difficulty / readability, is a categorical variable with multiple levels, it is no surprise that their model stood out in our model fitting process. </p>
<h1 id="model-performance">Model Performance</h1>
<p>Our final model had an <strong>accuracy of 0.41519</strong>, an <strong>adjacency of 0.84074</strong> (prediction within +/- 1 of the actual reading level), and a <strong>mean absolute error of 0.77037</strong>. These measures are averages computed over 50 train-test-split sets with 30% of our data as the test size.</p>
<img class="marginauto" src="https://raw.githubusercontent.com/AkulK1/TextReadability/master/RequestExtension/ReadFluidText.png" alt="scale" style="middle"/>
</div>
</body>

</html>




